#include "coordinates.h"
#include "hexxx.h"

float unit_coordinates_array[397][2] = { {0,0}, {-0.045454545454523744,-0.07872958216223423}, {0.045454545454572594,-0.07872958216220603}, {0.09090909090909091,3.7684944785466276e-14}, {0.045454545454507465,0.07872958216224363}, {-0.04545454545458887,0.07872958216219662}, {-0.09090909090909091,-5.632555844644938e-14}, {-0.09090909090904749,-0.15745916432446846}, {4.341981319943112e-14,-0.15745916432446846}, {0.09090909090914519,-0.15745916432441207}, {0.1363636363636852,-0.07872958216218723}, {0.18181818181818182,7.536988957093255e-14}, {0.1363636363636255,0.07872958216229081}, {0.09090909090901493,0.15745916432448726}, {-7.597962663071071e-14,0.15745916432446844}, {-0.09090909090917774,0.15745916432439325}, {-0.1363636363637015,0.07872958216215903}, {-0.18181818181818182,-1.1265111689289876e-13}, {-0.13636363636360924,-0.07872958216231868}, {-0.13636363636357124,-0.23618874648670268}, {-0.045454545454480334,-0.23618874648670268}, {0.04545454545461058,-0.23618874648670268}, {0.1363636363637178,-0.2361887464866181}, {0.18181818181825785,-0.15745916432439327}, {0.22727272727279788,-0.07872958216216845}, {0.2727272727272727,1.1305483435639882e-13}, {0.2272727272727164,0.07872958216232849}, {0.1818181818181601,0.1574591643245439}, {0.1363636363635224,0.2361887464867309}, {0.045454545454431484,0.23618874648671204}, {-0.04545454545465943,0.2361887464866932}, {-0.1363636363637666,0.23618874648658988}, {-0.18181818181829038,0.15745916432435567}, {-0.2272727272728141,0.07872958216212143}, {-0.2727272727272727,-1.6897667533934815e-13}, {-0.22727272727270015,-0.07872958216237501}, {-0.18181818181812756,-0.15745916432458104}, {-0.18181818181809498,-0.31491832864893693}, {-0.09090909090900406,-0.31491832864893693}, {8.683962639886224e-14,-0.31491832864893693}, {0.09090909090917774,-0.31491832864893693}, {0.18181818181829038,-0.31491832864882413}, {0.22727272727283043,-0.2361887464865993}, {0.27272727272737046,-0.15745916432437446}, {0.3181818181819105,-0.07872958216214963}, {0.36363636363636365,1.507397791418651e-13}, {0.3181818181818073,0.07872958216236617}, {0.272727272727251,0.15745916432458162}, {0.22727272727269468,0.23618874648679702}, {0.18181818181802986,0.3149183286489745}, {0.09090909090893895,0.3149183286489557}, {-1.5195925326142143e-13,0.3149183286489368}, {-0.09090909090924287,0.31491832864891794}, {-0.1818181818183555,0.3149183286487865}, {-0.22727272727287923,0.2361887464865523}, {-0.272727272727403,0.15745916432431806}, {-0.3181818181819267,0.07872958216208384}, {-0.36363636363636365,-2.2530223378579753e-13}, {-0.31818181818179103,-0.07872958216243132}, {-0.2727272727272185,-0.15745916432463736}, {-0.22727272727264589,-0.23618874648684338}, {-0.2272727272726187,-0.39364791081117106}, {-0.1363636363635278,-0.39364791081117106}, {-0.0454545454544369,-0.39364791081117106}, {0.045454545454654015,-0.39364791081117106}, {0.13636363636374493,-0.39364791081117106}, {0.22727272727286296,-0.3936479108110301}, {0.272727272727403,-0.3149183286488053}, {0.3181818181819431,-0.23618874648658048}, {0.36363636363648305,-0.15745916432435567}, {0.4090909090910231,-0.07872958216213083}, {0.45454545454545453,1.8842472392733137e-13}, {0.4090909090908983,0.07872958216240386}, {0.36363636363634194,0.1574591643246193}, {0.31818181818178565,0.23618874648683474}, {0.27272727272722935,0.31491832864905017}, {0.22727272727253733,0.39364791081121814}, {0.13636363636344642,0.3936479108111994}, {0.045454545454355504,0.39364791081118056}, {-0.0454545454547354,0.39364791081116174}, {-0.1363636363638263,0.3936479108111429}, {-0.2272727272729444,0.3936479108109831}, {-0.2727272727274681,0.3149183286487489}, {-0.31818181818199187,0.23618874648651467}, {-0.3636363636365156,0.15745916432428045}, {-0.40909090909103935,0.07872958216204622}, {-0.45454545454545453,-2.8162779223224694e-13}, {-0.40909090909088197,-0.07872958216248765}, {-0.36363636363630936,-0.15745916432469367}, {-0.3181818181817368,-0.23618874648689972}, {-0.2727272727271642,-0.31491832864910574}, {-0.2727272727271425,-0.47237749297340537}, {-0.18181818181805157,-0.47237749297340537}, {-0.09090909090896067,-0.47237749297340537}, {1.3023925372511835e-13,-0.47237749297340537}, {0.09090909090922115,-0.47237749297340537}, {0.18181818181831205,-0.47237749297340537}, {0.2727272727274356,-0.4723774929732362}, {0.3181818181819756,-0.39364791081101136}, {0.3636363636365157,-0.31491832864878655}, {0.4090909090910557,-0.23618874648656174}, {0.45454545454559575,-0.15745916432433693}, {0.5000000000001358,-0.0787295821621121}, {0.5454545454545454,2.2610966871279764e-13}, {0.4999999999999892,0.07872958216244154}, {0.4545454545454329,0.15745916432465698}, {0.40909090909087664,0.23618874648687244}, {0.3636363636363203,0.3149183286490879}, {0.318181818181764,0.39364791081130335}, {0.2727272727270448,0.4723774929734618}, {0.18181818181795387,0.472377492973443}, {0.09090909090886297,0.4723774929734242}, {-2.2793887989213213e-13,0.47237749297340537}, {-0.09090909090931885,0.47237749297338655}, {-0.18181818181840975,0.47237749297336773}, {-0.2727272727275332,0.47237749297317977}, {-0.318181818182057,0.39364791081094547}, {-0.36363636363658075,0.3149183286487113}, {-0.4090909090911045,0.23618874648647703}, {-0.4545454545456282,0.1574591643242428}, {-0.500000000000152,0.0787295821620086}, {-0.5454545454545454,-3.379533506786963e-13}, {-0.49999999999997286,-0.07872958216254398}, {-0.4545454545454003,-0.15745916432475002}, {-0.4090909090908277,-0.236188746486956}, {-0.3636363636362551,-0.314918328649162}, {-0.3181818181816825,-0.393647910811368}, {-0.31818181818166624,-0.5511070751356396}, {-0.2272727272725753,-0.5511070751356396}, {-0.1363636363634844,-0.5511070751356396}, {-0.045454545454393494,-0.5511070751356396}, {0.04545454545469741,-0.5511070751356396}, {0.13636363636378832,-0.5511070751356396}, {0.22727272727287923,-0.5511070751356396}, {0.3181818181820082,-0.5511070751354422}, {0.3636363636365482,-0.4723774929732174}, {0.40909090909108825,-0.39364791081099254}, {0.4545454545456283,-0.31491832864876773}, {0.5000000000001683,-0.23618874648654292}, {0.5454545454547084,-0.1574591643243181}, {0.5909090909092485,-0.07872958216209328}, {0.6363636363636364,2.6379461349826394e-13}, {0.5909090909090801,0.07872958216247923}, {0.5454545454545238,0.15745916432469464}, {0.4999999999999675,0.23618874648691007}, {0.4545454545454113,0.3149183286491255}, {0.409090909090855,0.393647910811341}, {0.3636363636362987,0.4723774929735564}, {0.3181818181815523,0.5511070751357054}, {0.22727272727246134,0.5511070751356866}, {0.13636363636337043,0.5511070751356678}, {0.04545454545427952,0.5511070751356489}, {-0.04545454545481138,0.5511070751356302}, {-0.13636363636390228,0.5511070751356114}, {-0.2272727272729932,0.5511070751355925}, {-0.3181818181821221,0.5511070751353764}, {-0.3636363636366458,0.4723774929731422}, {-0.4090909090911696,0.39364791081090805}, {-0.4545454545456933,0.3149183286486738}, {-0.500000000000217,0.2361887464864396}, {-0.5454545454547408,0.15745916432420534}, {-0.5909090909092645,0.07872958216197112}, {-0.6363636363636364,-3.942789091251457e-13}, {-0.5909090909090637,-0.0787295821626003}, {-0.5454545454544912,-0.15745916432480633}, {-0.4999999999999186,-0.23618874648701238}, {-0.454545454545346,-0.31491832864921837}, {-0.40909090909077345,-0.39364791081142436}, {-0.36363636363620083,-0.4723774929736304}, {-0.36363636363618995,-0.6298366572978739}, {-0.27272727272709907,-0.6298366572978739}, {-0.18181818181800813,-0.6298366572978739}, {-0.09090909090891723,-0.6298366572978739}, {1.7367925279772448e-13,-0.6298366572978739}, {0.09090909090926459,-0.6298366572978739}, {0.1818181818183555,-0.6298366572978739}, {0.2727272727274464,-0.6298366572978739}, {0.36363636363658075,-0.6298366572976483}, {0.4090909090911208,-0.5511070751354233}, {0.45454545454566087,-0.4723774929731986}, {0.5000000000002008,-0.3936479108109738}, {0.5454545454547409,-0.3149183286487489}, {0.590909090909281,-0.2361887464865241}, {0.636363636363821,-0.1574591643242993}, {0.6818181818183611,-0.07872958216207447}, {0.7272727272727273,3.014795582837302e-13}, {0.681818181818171,0.07872958216251691}, {0.6363636363636147,0.15745916432473234}, {0.5909090909090584,0.23618874648694776}, {0.5454545454545022,0.31491832864916325}, {0.4999999999999459,0.3936479108113787}, {0.45454545454538964,0.47237749297359416}, {0.40909090909083334,0.5511070751358096}, {0.3636363636360597,0.629836657297949}, {0.2727272727269688,0.6298366572979303}, {0.1818181818178779,0.6298366572979114}, {0.09090909090878699,0.6298366572978926}, {-3.0391850652284286e-13,0.6298366572978739}, {-0.09090909090939482,0.629836657297855}, {-0.18181818181848575,0.6298366572978362}, {-0.27272727272757663,0.6298366572978173}, {-0.363636363636711,0.629836657297573}, {-0.40909090909123474,0.5511070751353387}, {-0.45454545454575845,0.4723774929731046}, {-0.5000000000002822,0.3936479108108704}, {-0.545454545454806,0.31491832864863617}, {-0.5909090909093296,0.23618874648640195}, {-0.6363636363638534,0.15745916432416773}, {-0.6818181818183772,0.0787295821619335}, {-0.7272727272727273,-4.5060446757159506e-13}, {-0.6818181818181547,-0.07872958216265663}, {-0.6363636363635821,-0.15745916432486265}, {-0.5909090909090096,-0.2361887464870687}, {-0.545454545454437,-0.3149183286492747}, {-0.49999999999986433,-0.39364791081148076}, {-0.45454545454529177,-0.47237749297368675}, {-0.40909090909071916,-0.5511070751358927}, {-0.4090909090907137,-0.708566239460108}, {-0.3181818181816228,-0.708566239460108}, {-0.22727272727253187,-0.708566239460108}, {-0.13636363636344095,-0.708566239460108}, {-0.04545454545435006,-0.708566239460108}, {0.045454545454740855,-0.708566239460108}, {0.13636363636383175,-0.708566239460108}, {0.22727272727292266,-0.708566239460108}, {0.3181818181820136,-0.708566239460108}, {0.40909090909115337,-0.7085662394598542}, {0.4545454545456934,-0.6298366572976294}, {0.5000000000002335,-0.5511070751354046}, {0.5454545454547735,-0.47237749297317977}, {0.5909090909093135,-0.39364791081095496}, {0.6363636363638535,-0.3149183286487301}, {0.6818181818183936,-0.2361887464865053}, {0.7272727272729337,-0.15745916432428048}, {0.7727272727274737,-0.07872958216205565}, {0.8181818181818182,3.3916450306919647e-13}, {0.7727272727272619,0.0787295821625546}, {0.7272727272727056,0.15745916432477003}, {0.6818181818181493,0.23618874648698548}, {0.636363636363593,0.31491832864920094}, {0.5909090909090368,0.39364791081141637}, {0.5454545454544806,0.47237749297363185}, {0.4999999999999243,0.5511070751358473}, {0.454545454545368,0.6298366572980627}, {0.4090909090905672,0.7085662394601927}, {0.31818181818147634,0.7085662394601738}, {0.2272727272723854,0.7085662394601551}, {0.1363636363632945,0.7085662394601363}, {0.04545454545420358,0.7085662394601174}, {-0.04545454545488732,0.7085662394600987}, {-0.13636363636397822,0.7085662394600798}, {-0.22727272727306913,0.708566239460061}, {-0.31818181818216007,0.7085662394600422}, {-0.4090909090912999,0.7085662394597697}, {-0.4545454545458236,0.6298366572975355}, {-0.5000000000003474,0.5511070751353013}, {-0.545454545454871,0.47237749297306714}, {-0.5909090909093948,0.39364791081083295}, {-0.6363636363639186,0.3149183286485987}, {-0.6818181818184423,0.23618874648636448}, {-0.7272727272729661,0.15745916432413026}, {-0.77272727272749,0.07872958216189603}, {-0.8181818181818182,-5.069300260180445e-13}, {-0.7727272727272456,-0.07872958216271296}, {-0.727272727272673,-0.157459164324919}, {-0.6818181818181004,-0.236188746487125}, {-0.6363636363635279,-0.314918328649331}, {-0.5909090909089553,-0.393647910811537}, {-0.5454545454543827,-0.47237749297374304}, {-0.4999999999998101,-0.551107075135949}, {-0.4545454545452375,-0.6298366572981551}, {-0.4545454545452374,-0.7872958216223421}, {-0.36363636363614654,-0.7872958216223421}, {-0.2727272727270556,-0.7872958216223421}, {-0.1818181818179647,-0.7872958216223421}, {-0.0909090909088738,-0.7872958216223421}, {2.1711925187033063e-13,-0.7872958216223421}, {0.09090909090930803,-0.7872958216223421}, {0.18181818181839893,-0.7872958216223421}, {0.27272727272748987,-0.7872958216223421}, {0.36363636363658075,-0.7872958216223421}, {0.4545454545457259,-0.7872958216220602}, {0.500000000000266,-0.7085662394598354}, {0.545454545454806,-0.6298366572976106}, {0.5909090909093461,-0.5511070751353858}, {0.6363636363638862,-0.47237749297316095}, {0.6818181818184261,-0.39364791081093614}, {0.7272727272729661,-0.31491832864871133}, {0.7727272727275061,-0.2361887464864865}, {0.818181818182046,-0.15745916432426166}, {0.863636363636586,-0.07872958216203683}, {0.9090909090909091,3.7684944785466274e-13}, {0.8636363636363528,0.07872958216259228}, {0.8181818181817966,0.15745916432480772}, {0.7727272727272403,0.23618874648702315}, {0.727272727272684,0.3149183286492386}, {0.6818181818181277,0.393647910811454}, {0.6363636363635714,0.4723774929736695}, {0.5909090909090152,0.551107075135885}, {0.5454545454544589,0.6298366572981003}, {0.49999999999990263,0.7085662394603158}, {0.45454545454507467,0.7872958216224363}, {0.36363636363598373,0.7872958216224174}, {0.27272727272689284,0.7872958216223985}, {0.18181818181780193,0.7872958216223797}, {0.09090909090871101,0.7872958216223608}, {-3.798981331535536e-13,0.7872958216223419}, {-0.0909090909094708,0.7872958216223229}, {-0.1818181818185617,0.787295821622304}, {-0.2727272727276526,0.7872958216222852}, {-0.3636363636367435,0.7872958216222663}, {-0.4545454545458888,0.7872958216219662}, {-0.5000000000004126,0.7085662394597321}, {-0.5454545454549362,0.6298366572974978}, {-0.59090909090946,0.5511070751352637}, {-0.6363636363639837,0.4723774929730295}, {-0.6818181818185075,0.3936479108107953}, {-0.7272727272730312,0.31491832864856106}, {-0.772727272727555,0.23618874648632684}, {-0.8181818181820788,0.15745916432409263}, {-0.8636363636366027,0.07872958216185841}, {-0.9090909090909091,-5.632555844644939e-13}, {-0.8636363636363366,-0.07872958216276928}, {-0.8181818181817639,-0.1574591643249753}, {-0.7727272727271913,-0.23618874648718136}, {-0.7272727272726187,-0.31491832864938735}, {-0.6818181818180462,-0.3936479108115934}, {-0.6363636363634736,-0.4723774929737994}, {-0.590909090908901,-0.5511070751360054}, {-0.5454545454543284,-0.6298366572982114}, {-0.4999999999997558,-0.7085662394604174}, {-0.49999999999976114,-0.8660254037845765}, {-0.40909090909067025,-0.8660254037845765}, {-0.31818181818157937,-0.8660254037845765}, {-0.22727272727248843,-0.8660254037845765}, {-0.13636363636339752,-0.8660254037845765}, {-0.04545454545430661,-0.8660254037845765}, {0.04545454545478429,-0.8660254037845765}, {0.1363636363638752,-0.8660254037845765}, {0.2272727272729661,-0.8660254037845765}, {0.31818181818205704,-0.8660254037845765}, {0.4090909090911479,-0.8660254037845765}, {0.5000000000002985,-0.8660254037842663}, {0.5454545454548385,-0.7872958216220415}, {0.5909090909093786,-0.7085662394598167}, {0.6363636363639187,-0.6298366572975919}, {0.6818181818184587,-0.551107075135367}, {0.7272727272729987,-0.4723774929731422}, {0.7727272727275387,-0.3936479108109174}, {0.8181818181820787,-0.31491832864869257}, {0.8636363636366187,-0.23618874648646776}, {0.9090909090911586,-0.15745916432424292}, {0.9545454545456985,-0.0787295821620181}, {1.0,4.14534392640129e-13}, {0.9545454545454437,0.07872958216262997}, {0.9090909090908874,0.1574591643248454}, {0.8636363636363312,0.2361887464870608}, {0.8181818181817749,0.31491832864927627}, {0.7727272727272186,0.3936479108114917}, {0.7272727272726623,0.4723774929737072}, {0.681818181818106,0.5511070751359226}, {0.6363636363635498,0.6298366572981381}, {0.5909090909089936,0.7085662394603536}, {0.5454545454544373,0.787295821622569}, {0.49999999999958206,0.8660254037846801}, {0.4090909090904912,0.8660254037846612}, {0.31818181818140023,0.8660254037846422}, {0.22727272727230935,0.8660254037846233}, {0.13636363636321844,0.8660254037846045}, {0.045454545454127526,0.8660254037845856}, {-0.045454545454963385,0.8660254037845667}, {-0.1363636363640543,0.8660254037845477}, {-0.2272727272731452,0.8660254037845289}, {-0.3181818181822361,0.86602540378451}, {-0.409090909091327,0.8660254037844911}, {-0.5000000000004776,0.8660254037841629}, {-0.5454545454550014,0.7872958216219288}, {-0.590909090909525,0.7085662394596945}, {-0.6363636363640488,0.6298366572974604}, {-0.6818181818185726,0.5511070751352262}, {-0.7272727272730962,0.47237749297299203}, {-0.7727272727276201,0.39364791081075784}, {-0.8181818181821439,0.3149183286485236}, {-0.8636363636366677,0.2361887464862894}, {-0.9090909090911915,0.15745916432405516}, {-0.9545454545457154,0.07872958216182094}, {-1.0,-6.195811429109432e-13}, {-0.9545454545454274,-0.0787295821628256}, {-0.9090909090908549,-0.15745916432503163}, {-0.8636363636362823,-0.23618874648723764}, {-0.8181818181817097,-0.31491832864944364}, {-0.772727272727137,-0.3936479108116497}, {-0.7272727272725645,-0.4723774929738557}, {-0.6818181818179919,-0.5511070751360617}, {-0.6363636363634193,-0.6298366572982677}, {-0.5909090909088467,-0.7085662394604737}, {-0.5454545454542742,-0.7872958216226796} };

float led2unitx( int led ) {
  return unit_coordinates_array[ led ][ 0 ];
}

float led2unity( int led ) {
  return unit_coordinates_array[ led ][ 1 ];
}

int coordinates_array[397][2] = { {127,127}, {121,117}, {133,117}, {139,127}, {133,137}, {121,137}, {116,127}, {116,107}, {127,107}, {139,107}, {144,117}, {150,127}, {144,137}, {138,147}, {127,147}, {115,147}, {110,137}, {104,127}, {110,117}, {110,97}, {121,97}, {133,97}, {144,97}, {150,107}, {156,117}, {162,127}, {156,137}, {150,147}, {144,157}, {133,157}, {121,157}, {110,157}, {104,147}, {98,137}, {93,127}, {98,117}, {104,107}, {104,87}, {116,87}, {127,87}, {139,87}, {150,87}, {156,97}, {162,107}, {167,117}, {173,127}, {167,137}, {161,147}, {156,157}, {150,167}, {138,167}, {127,167}, {115,167}, {104,167}, {98,157}, {92,147}, {87,137}, {81,127}, {87,117}, {93,107}, {98,97}, {98,77}, {110,77}, {121,77}, {133,77}, {144,77}, {156,77}, {162,87}, {167,97}, {173,107}, {179,117}, {185,127}, {179,137}, {173,147}, {167,157}, {161,167}, {156,177}, {144,177}, {133,177}, {121,177}, {110,177}, {98,177}, {92,167}, {87,157}, {81,147}, {75,137}, {70,127}, {75,117}, {81,107}, {87,97}, {93,87}, {93,67}, {104,67}, {116,67}, {127,67}, {139,67}, {150,67}, {162,67}, {167,77}, {173,87}, {179,97}, {185,107}, {190,117}, {196,127}, {190,137}, {184,147}, {179,157}, {173,167}, {167,177}, {161,187}, {150,187}, {138,187}, {127,187}, {115,187}, {104,187}, {92,187}, {87,177}, {81,167}, {75,157}, {69,147}, {64,137}, {58,127}, {64,117}, {70,107}, {75,97}, {81,87}, {87,77}, {87,57}, {98,57}, {110,57}, {121,57}, {133,57}, {144,57}, {156,57}, {167,57}, {173,67}, {179,77}, {185,87}, {190,97}, {196,107}, {202,117}, {208,127}, {202,137}, {196,147}, {190,157}, {184,167}, {179,177}, {173,187}, {167,197}, {156,197}, {144,197}, {133,197}, {121,197}, {110,197}, {98,197}, {87,197}, {81,187}, {75,177}, {69,167}, {64,157}, {58,147}, {52,137}, {47,127}, {52,117}, {58,107}, {64,97}, {70,87}, {75,77}, {81,67}, {81,47}, {93,47}, {104,47}, {116,47}, {127,47}, {139,47}, {150,47}, {162,47}, {173,47}, {179,57}, {185,67}, {190,77}, {196,87}, {202,97}, {208,107}, {213,117}, {219,127}, {213,137}, {207,147}, {202,157}, {196,167}, {190,177}, {184,187}, {179,197}, {173,207}, {161,207}, {150,207}, {138,207}, {127,207}, {115,207}, {104,207}, {92,207}, {81,207}, {75,197}, {69,187}, {64,177}, {58,167}, {52,157}, {46,147}, {41,137}, {35,127}, {41,117}, {47,107}, {52,97}, {58,87}, {64,77}, {70,67}, {75,57}, {75,37}, {87,37}, {98,37}, {110,37}, {121,37}, {133,37}, {144,37}, {156,37}, {167,37}, {179,37}, {185,47}, {190,57}, {196,67}, {202,77}, {208,87}, {213,97}, {219,107}, {225,117}, {231,127}, {225,137}, {219,147}, {213,157}, {207,167}, {202,177}, {196,187}, {190,197}, {184,207}, {179,217}, {167,217}, {156,217}, {144,217}, {133,217}, {121,217}, {110,217}, {98,217}, {87,217}, {75,217}, {69,207}, {64,197}, {58,187}, {52,177}, {46,167}, {41,157}, {35,147}, {29,137}, {24,127}, {29,117}, {35,107}, {41,97}, {47,87}, {52,77}, {58,67}, {64,57}, {70,47}, {70,27}, {81,27}, {93,27}, {104,27}, {116,27}, {127,27}, {139,27}, {150,27}, {162,27}, {173,27}, {185,27}, {190,37}, {196,47}, {202,57}, {208,67}, {213,77}, {219,87}, {225,97}, {231,107}, {236,117}, {242,127}, {236,137}, {230,147}, {225,157}, {219,167}, {213,177}, {207,187}, {202,197}, {196,207}, {190,217}, {184,227}, {173,227}, {161,227}, {150,227}, {138,227}, {127,227}, {115,227}, {104,227}, {92,227}, {81,227}, {69,227}, {64,217}, {58,207}, {52,197}, {46,187}, {41,177}, {35,167}, {29,157}, {23,147}, {18,137}, {12,127}, {18,117}, {24,107}, {29,97}, {35,87}, {41,77}, {47,67}, {52,57}, {58,47}, {64,37}, {64,17}, {75,17}, {87,17}, {98,17}, {110,17}, {121,17}, {133,17}, {144,17}, {156,17}, {167,17}, {179,17}, {190,17}, {196,27}, {202,37}, {208,47}, {213,57}, {219,67}, {225,77}, {231,87}, {236,97}, {242,107}, {248,117}, {254,127}, {248,137}, {242,147}, {236,157}, {230,167}, {225,177}, {219,187}, {213,197}, {207,207}, {202,217}, {196,227}, {190,237}, {179,237}, {167,237}, {156,237}, {144,237}, {133,237}, {121,237}, {110,237}, {98,237}, {87,237}, {75,237}, {64,237}, {58,227}, {52,217}, {46,207}, {41,197}, {35,187}, {29,177}, {23,167}, {18,157}, {12,147}, {6,137}, {1,127}, {6,117}, {12,107}, {18,97}, {24,87}, {29,77}, {35,67}, {41,57}, {47,47}, {52,37}, {58,27} };

int led2bytex( int led ) {
  return coordinates_array[ led ][ 0 ];
}

int led2bytey( int led ) {
  return coordinates_array[ led ][ 1 ];
}

int neighbors_array[397][6] = { {3,4,5,6,1,2}, {2,0,6,18,7,8}, {10,3,0,1,8,9}, {11,12,4,0,2,10}, {12,13,14,5,0,3}, {4,14,15,16,6,0}, {0,5,16,17,18,1}, {8,1,18,36,19,20}, {9,2,1,7,20,21}, {23,10,2,8,21,22}, {24,11,3,2,9,23}, {25,26,12,3,10,24}, {26,27,13,4,3,11}, {27,28,29,14,4,12}, {13,29,30,15,5,4}, {14,30,31,32,16,5}, {5,15,32,33,17,6}, {6,16,33,34,35,18}, {1,6,17,35,36,7}, {20,7,36,60,37,38}, {21,8,7,19,38,39}, {22,9,8,20,39,40}, {42,23,9,21,40,41}, {43,24,10,9,22,42}, {44,25,11,10,23,43}, {45,46,26,11,24,44}, {46,47,27,12,11,25}, {47,48,28,13,12,26}, {48,49,50,29,13,27}, {28,50,51,30,14,13}, {29,51,52,31,15,14}, {30,52,53,54,32,15}, {15,31,54,55,33,16}, {16,32,55,56,34,17}, {17,33,56,57,58,35}, {18,17,34,58,59,36}, {7,18,35,59,60,19}, {38,19,60,90,61,62}, {39,20,19,37,62,63}, {40,21,20,38,63,64}, {41,22,21,39,64,65}, {67,42,22,40,65,66}, {68,43,23,22,41,67}, {69,44,24,23,42,68}, {70,45,25,24,43,69}, {71,72,46,25,44,70}, {72,73,47,26,25,45}, {73,74,48,27,26,46}, {74,75,49,28,27,47}, {75,76,77,50,28,48}, {49,77,78,51,29,28}, {50,78,79,52,30,29}, {51,79,80,53,31,30}, {52,80,81,82,54,31}, {31,53,82,83,55,32}, {32,54,83,84,56,33}, {33,55,84,85,57,34}, {34,56,85,86,87,58}, {35,34,57,87,88,59}, {36,35,58,88,89,60}, {19,36,59,89,90,37}, {62,37,90,126,91,92}, {63,38,37,61,92,93}, {64,39,38,62,93,94}, {65,40,39,63,94,95}, {66,41,40,64,95,96}, {98,67,41,65,96,97}, {99,68,42,41,66,98}, {100,69,43,42,67,99}, {101,70,44,43,68,100}, {102,71,45,44,69,101}, {103,104,72,45,70,102}, {104,105,73,46,45,71}, {105,106,74,47,46,72}, {106,107,75,48,47,73}, {107,108,76,49,48,74}, {108,109,110,77,49,75}, {76,110,111,78,50,49}, {77,111,112,79,51,50}, {78,112,113,80,52,51}, {79,113,114,81,53,52}, {80,114,115,116,82,53}, {53,81,116,117,83,54}, {54,82,117,118,84,55}, {55,83,118,119,85,56}, {56,84,119,120,86,57}, {57,85,120,121,122,87}, {58,57,86,122,123,88}, {59,58,87,123,124,89}, {60,59,88,124,125,90}, {37,60,89,125,126,61}, {92,61,126,168,127,128}, {93,62,61,91,128,129}, {94,63,62,92,129,130}, {95,64,63,93,130,131}, {96,65,64,94,131,132}, {97,66,65,95,132,133}, {135,98,66,96,133,134}, {136,99,67,66,97,135}, {137,100,68,67,98,136}, {138,101,69,68,99,137}, {139,102,70,69,100,138}, {140,103,71,70,101,139}, {141,142,104,71,102,140}, {142,143,105,72,71,103}, {143,144,106,73,72,104}, {144,145,107,74,73,105}, {145,146,108,75,74,106}, {146,147,109,76,75,107}, {147,148,149,110,76,108}, {109,149,150,111,77,76}, {110,150,151,112,78,77}, {111,151,152,113,79,78}, {112,152,153,114,80,79}, {113,153,154,115,81,80}, {114,154,155,156,116,81}, {81,115,156,157,117,82}, {82,116,157,158,118,83}, {83,117,158,159,119,84}, {84,118,159,160,120,85}, {85,119,160,161,121,86}, {86,120,161,162,163,122}, {87,86,121,163,164,123}, {88,87,122,164,165,124}, {89,88,123,165,166,125}, {90,89,124,166,167,126}, {61,90,125,167,168,91}, {128,91,168,216,169,170}, {129,92,91,127,170,171}, {130,93,92,128,171,172}, {131,94,93,129,172,173}, {132,95,94,130,173,174}, {133,96,95,131,174,175}, {134,97,96,132,175,176}, {178,135,97,133,176,177}, {179,136,98,97,134,178}, {180,137,99,98,135,179}, {181,138,100,99,136,180}, {182,139,101,100,137,181}, {183,140,102,101,138,182}, {184,141,103,102,139,183}, {185,186,142,103,140,184}, {186,187,143,104,103,141}, {187,188,144,105,104,142}, {188,189,145,106,105,143}, {189,190,146,107,106,144}, {190,191,147,108,107,145}, {191,192,148,109,108,146}, {192,193,194,149,109,147}, {148,194,195,150,110,109}, {149,195,196,151,111,110}, {150,196,197,152,112,111}, {151,197,198,153,113,112}, {152,198,199,154,114,113}, {153,199,200,155,115,114}, {154,200,201,202,156,115}, {115,155,202,203,157,116}, {116,156,203,204,158,117}, {117,157,204,205,159,118}, {118,158,205,206,160,119}, {119,159,206,207,161,120}, {120,160,207,208,162,121}, {121,161,208,209,210,163}, {122,121,162,210,211,164}, {123,122,163,211,212,165}, {124,123,164,212,213,166}, {125,124,165,213,214,167}, {126,125,166,214,215,168}, {91,126,167,215,216,127}, {170,127,216,270,217,218}, {171,128,127,169,218,219}, {172,129,128,170,219,220}, {173,130,129,171,220,221}, {174,131,130,172,221,222}, {175,132,131,173,222,223}, {176,133,132,174,223,224}, {177,134,133,175,224,225}, {227,178,134,176,225,226}, {228,179,135,134,177,227}, {229,180,136,135,178,228}, {230,181,137,136,179,229}, {231,182,138,137,180,230}, {232,183,139,138,181,231}, {233,184,140,139,182,232}, {234,185,141,140,183,233}, {235,236,186,141,184,234}, {236,237,187,142,141,185}, {237,238,188,143,142,186}, {238,239,189,144,143,187}, {239,240,190,145,144,188}, {240,241,191,146,145,189}, {241,242,192,147,146,190}, {242,243,193,148,147,191}, {243,244,245,194,148,192}, {193,245,246,195,149,148}, {194,246,247,196,150,149}, {195,247,248,197,151,150}, {196,248,249,198,152,151}, {197,249,250,199,153,152}, {198,250,251,200,154,153}, {199,251,252,201,155,154}, {200,252,253,254,202,155}, {155,201,254,255,203,156}, {156,202,255,256,204,157}, {157,203,256,257,205,158}, {158,204,257,258,206,159}, {159,205,258,259,207,160}, {160,206,259,260,208,161}, {161,207,260,261,209,162}, {162,208,261,262,263,210}, {163,162,209,263,264,211}, {164,163,210,264,265,212}, {165,164,211,265,266,213}, {166,165,212,266,267,214}, {167,166,213,267,268,215}, {168,167,214,268,269,216}, {127,168,215,269,270,169}, {218,169,270,330,271,272}, {219,170,169,217,272,273}, {220,171,170,218,273,274}, {221,172,171,219,274,275}, {222,173,172,220,275,276}, {223,174,173,221,276,277}, {224,175,174,222,277,278}, {225,176,175,223,278,279}, {226,177,176,224,279,280}, {282,227,177,225,280,281}, {283,228,178,177,226,282}, {284,229,179,178,227,283}, {285,230,180,179,228,284}, {286,231,181,180,229,285}, {287,232,182,181,230,286}, {288,233,183,182,231,287}, {289,234,184,183,232,288}, {290,235,185,184,233,289}, {291,292,236,185,234,290}, {292,293,237,186,185,235}, {293,294,238,187,186,236}, {294,295,239,188,187,237}, {295,296,240,189,188,238}, {296,297,241,190,189,239}, {297,298,242,191,190,240}, {298,299,243,192,191,241}, {299,300,244,193,192,242}, {300,301,302,245,193,243}, {244,302,303,246,194,193}, {245,303,304,247,195,194}, {246,304,305,248,196,195}, {247,305,306,249,197,196}, {248,306,307,250,198,197}, {249,307,308,251,199,198}, {250,308,309,252,200,199}, {251,309,310,253,201,200}, {252,310,311,312,254,201}, {201,253,312,313,255,202}, {202,254,313,314,256,203}, {203,255,314,315,257,204}, {204,256,315,316,258,205}, {205,257,316,317,259,206}, {206,258,317,318,260,207}, {207,259,318,319,261,208}, {208,260,319,320,262,209}, {209,261,320,321,322,263}, {210,209,262,322,323,264}, {211,210,263,323,324,265}, {212,211,264,324,325,266}, {213,212,265,325,326,267}, {214,213,266,326,327,268}, {215,214,267,327,328,269}, {216,215,268,328,329,270}, {169,216,269,329,330,217}, {272,217,330,396,331,332}, {273,218,217,271,332,333}, {274,219,218,272,333,334}, {275,220,219,273,334,335}, {276,221,220,274,335,336}, {277,222,221,275,336,337}, {278,223,222,276,337,338}, {279,224,223,277,338,339}, {280,225,224,278,339,340}, {281,226,225,279,340,341}, {343,282,226,280,341,342}, {344,283,227,226,281,343}, {345,284,228,227,282,344}, {346,285,229,228,283,345}, {347,286,230,229,284,346}, {348,287,231,230,285,347}, {349,288,232,231,286,348}, {350,289,233,232,287,349}, {351,290,234,233,288,350}, {352,291,235,234,289,351}, {353,354,292,235,290,352}, {354,355,293,236,235,291}, {355,356,294,237,236,292}, {356,357,295,238,237,293}, {357,358,296,239,238,294}, {358,359,297,240,239,295}, {359,360,298,241,240,296}, {360,361,299,242,241,297}, {361,362,300,243,242,298}, {362,363,301,244,243,299}, {363,364,365,302,244,300}, {301,365,366,303,245,244}, {302,366,367,304,246,245}, {303,367,368,305,247,246}, {304,368,369,306,248,247}, {305,369,370,307,249,248}, {306,370,371,308,250,249}, {307,371,372,309,251,250}, {308,372,373,310,252,251}, {309,373,374,311,253,252}, {310,374,375,376,312,253}, {253,311,376,377,313,254}, {254,312,377,378,314,255}, {255,313,378,379,315,256}, {256,314,379,380,316,257}, {257,315,380,381,317,258}, {258,316,381,382,318,259}, {259,317,382,383,319,260}, {260,318,383,384,320,261}, {261,319,384,385,321,262}, {262,320,385,386,387,322}, {263,262,321,387,388,323}, {264,263,322,388,389,324}, {265,264,323,389,390,325}, {266,265,324,390,391,326}, {267,266,325,391,392,327}, {268,267,326,392,393,328}, {269,268,327,393,394,329}, {270,269,328,394,395,330}, {217,270,329,395,396,271}, {332,271,396,331,331,331}, {333,272,271,331,332,332}, {334,273,272,332,333,333}, {335,274,273,333,334,334}, {336,275,274,334,335,335}, {337,276,275,335,336,336}, {338,277,276,336,337,337}, {339,278,277,337,338,338}, {340,279,278,338,339,339}, {341,280,279,339,340,340}, {342,281,280,340,341,341}, {342,343,281,341,342,342}, {343,344,282,281,342,343}, {344,345,283,282,343,344}, {345,346,284,283,344,345}, {346,347,285,284,345,346}, {347,348,286,285,346,347}, {348,349,287,286,347,348}, {349,350,288,287,348,349}, {350,351,289,288,349,350}, {351,352,290,289,350,351}, {352,353,291,290,351,352}, {353,353,354,291,352,353}, {354,354,355,292,291,353}, {355,355,356,293,292,354}, {356,356,357,294,293,355}, {357,357,358,295,294,356}, {358,358,359,296,295,357}, {359,359,360,297,296,358}, {360,360,361,298,297,359}, {361,361,362,299,298,360}, {362,362,363,300,299,361}, {363,363,364,301,300,362}, {364,364,364,365,301,363}, {364,365,365,366,302,301}, {365,366,366,367,303,302}, {366,367,367,368,304,303}, {367,368,368,369,305,304}, {368,369,369,370,306,305}, {369,370,370,371,307,306}, {370,371,371,372,308,307}, {371,372,372,373,309,308}, {372,373,373,374,310,309}, {373,374,374,375,311,310}, {374,375,375,375,376,311}, {311,375,376,376,377,312}, {312,376,377,377,378,313}, {313,377,378,378,379,314}, {314,378,379,379,380,315}, {315,379,380,380,381,316}, {316,380,381,381,382,317}, {317,381,382,382,383,318}, {318,382,383,383,384,319}, {319,383,384,384,385,320}, {320,384,385,385,386,321}, {321,385,386,386,386,387}, {322,321,386,387,387,388}, {323,322,387,388,388,389}, {324,323,388,389,389,390}, {325,324,389,390,390,391}, {326,325,390,391,391,392}, {327,326,391,392,392,393}, {328,327,392,393,393,394}, {329,328,393,394,394,395}, {330,329,394,395,395,396}, {271,330,395,396,396,331} };

int neighbor( int led, int neighbor ) {
  return neighbors_array[ led ][ neighbor % 6 ];
}

int warping_neighbors_array[397][6] = { {3,4,5,6,1,2}, {2,0,6,18,7,8}, {10,3,0,1,8,9}, {11,12,4,0,2,10}, {12,13,14,5,0,3}, {4,14,15,16,6,0}, {0,5,16,17,18,1}, {8,1,18,36,19,20}, {9,2,1,7,20,21}, {23,10,2,8,21,22}, {24,11,3,2,9,23}, {25,26,12,3,10,24}, {26,27,13,4,3,11}, {27,28,29,14,4,12}, {13,29,30,15,5,4}, {14,30,31,32,16,5}, {5,15,32,33,17,6}, {6,16,33,34,35,18}, {1,6,17,35,36,7}, {20,7,36,60,37,38}, {21,8,7,19,38,39}, {22,9,8,20,39,40}, {42,23,9,21,40,41}, {43,24,10,9,22,42}, {44,25,11,10,23,43}, {45,46,26,11,24,44}, {46,47,27,12,11,25}, {47,48,28,13,12,26}, {48,49,50,29,13,27}, {28,50,51,30,14,13}, {29,51,52,31,15,14}, {30,52,53,54,32,15}, {15,31,54,55,33,16}, {16,32,55,56,34,17}, {17,33,56,57,58,35}, {18,17,34,58,59,36}, {7,18,35,59,60,19}, {38,19,60,90,61,62}, {39,20,19,37,62,63}, {40,21,20,38,63,64}, {41,22,21,39,64,65}, {67,42,22,40,65,66}, {68,43,23,22,41,67}, {69,44,24,23,42,68}, {70,45,25,24,43,69}, {71,72,46,25,44,70}, {72,73,47,26,25,45}, {73,74,48,27,26,46}, {74,75,49,28,27,47}, {75,76,77,50,28,48}, {49,77,78,51,29,28}, {50,78,79,52,30,29}, {51,79,80,53,31,30}, {52,80,81,82,54,31}, {31,53,82,83,55,32}, {32,54,83,84,56,33}, {33,55,84,85,57,34}, {34,56,85,86,87,58}, {35,34,57,87,88,59}, {36,35,58,88,89,60}, {19,36,59,89,90,37}, {62,37,90,126,91,92}, {63,38,37,61,92,93}, {64,39,38,62,93,94}, {65,40,39,63,94,95}, {66,41,40,64,95,96}, {98,67,41,65,96,97}, {99,68,42,41,66,98}, {100,69,43,42,67,99}, {101,70,44,43,68,100}, {102,71,45,44,69,101}, {103,104,72,45,70,102}, {104,105,73,46,45,71}, {105,106,74,47,46,72}, {106,107,75,48,47,73}, {107,108,76,49,48,74}, {108,109,110,77,49,75}, {76,110,111,78,50,49}, {77,111,112,79,51,50}, {78,112,113,80,52,51}, {79,113,114,81,53,52}, {80,114,115,116,82,53}, {53,81,116,117,83,54}, {54,82,117,118,84,55}, {55,83,118,119,85,56}, {56,84,119,120,86,57}, {57,85,120,121,122,87}, {58,57,86,122,123,88}, {59,58,87,123,124,89}, {60,59,88,124,125,90}, {37,60,89,125,126,61}, {92,61,126,168,127,128}, {93,62,61,91,128,129}, {94,63,62,92,129,130}, {95,64,63,93,130,131}, {96,65,64,94,131,132}, {97,66,65,95,132,133}, {135,98,66,96,133,134}, {136,99,67,66,97,135}, {137,100,68,67,98,136}, {138,101,69,68,99,137}, {139,102,70,69,100,138}, {140,103,71,70,101,139}, {141,142,104,71,102,140}, {142,143,105,72,71,103}, {143,144,106,73,72,104}, {144,145,107,74,73,105}, {145,146,108,75,74,106}, {146,147,109,76,75,107}, {147,148,149,110,76,108}, {109,149,150,111,77,76}, {110,150,151,112,78,77}, {111,151,152,113,79,78}, {112,152,153,114,80,79}, {113,153,154,115,81,80}, {114,154,155,156,116,81}, {81,115,156,157,117,82}, {82,116,157,158,118,83}, {83,117,158,159,119,84}, {84,118,159,160,120,85}, {85,119,160,161,121,86}, {86,120,161,162,163,122}, {87,86,121,163,164,123}, {88,87,122,164,165,124}, {89,88,123,165,166,125}, {90,89,124,166,167,126}, {61,90,125,167,168,91}, {128,91,168,216,169,170}, {129,92,91,127,170,171}, {130,93,92,128,171,172}, {131,94,93,129,172,173}, {132,95,94,130,173,174}, {133,96,95,131,174,175}, {134,97,96,132,175,176}, {178,135,97,133,176,177}, {179,136,98,97,134,178}, {180,137,99,98,135,179}, {181,138,100,99,136,180}, {182,139,101,100,137,181}, {183,140,102,101,138,182}, {184,141,103,102,139,183}, {185,186,142,103,140,184}, {186,187,143,104,103,141}, {187,188,144,105,104,142}, {188,189,145,106,105,143}, {189,190,146,107,106,144}, {190,191,147,108,107,145}, {191,192,148,109,108,146}, {192,193,194,149,109,147}, {148,194,195,150,110,109}, {149,195,196,151,111,110}, {150,196,197,152,112,111}, {151,197,198,153,113,112}, {152,198,199,154,114,113}, {153,199,200,155,115,114}, {154,200,201,202,156,115}, {115,155,202,203,157,116}, {116,156,203,204,158,117}, {117,157,204,205,159,118}, {118,158,205,206,160,119}, {119,159,206,207,161,120}, {120,160,207,208,162,121}, {121,161,208,209,210,163}, {122,121,162,210,211,164}, {123,122,163,211,212,165}, {124,123,164,212,213,166}, {125,124,165,213,214,167}, {126,125,166,214,215,168}, {91,126,167,215,216,127}, {170,127,216,270,217,218}, {171,128,127,169,218,219}, {172,129,128,170,219,220}, {173,130,129,171,220,221}, {174,131,130,172,221,222}, {175,132,131,173,222,223}, {176,133,132,174,223,224}, {177,134,133,175,224,225}, {227,178,134,176,225,226}, {228,179,135,134,177,227}, {229,180,136,135,178,228}, {230,181,137,136,179,229}, {231,182,138,137,180,230}, {232,183,139,138,181,231}, {233,184,140,139,182,232}, {234,185,141,140,183,233}, {235,236,186,141,184,234}, {236,237,187,142,141,185}, {237,238,188,143,142,186}, {238,239,189,144,143,187}, {239,240,190,145,144,188}, {240,241,191,146,145,189}, {241,242,192,147,146,190}, {242,243,193,148,147,191}, {243,244,245,194,148,192}, {193,245,246,195,149,148}, {194,246,247,196,150,149}, {195,247,248,197,151,150}, {196,248,249,198,152,151}, {197,249,250,199,153,152}, {198,250,251,200,154,153}, {199,251,252,201,155,154}, {200,252,253,254,202,155}, {155,201,254,255,203,156}, {156,202,255,256,204,157}, {157,203,256,257,205,158}, {158,204,257,258,206,159}, {159,205,258,259,207,160}, {160,206,259,260,208,161}, {161,207,260,261,209,162}, {162,208,261,262,263,210}, {163,162,209,263,264,211}, {164,163,210,264,265,212}, {165,164,211,265,266,213}, {166,165,212,266,267,214}, {167,166,213,267,268,215}, {168,167,214,268,269,216}, {127,168,215,269,270,169}, {218,169,270,330,271,272}, {219,170,169,217,272,273}, {220,171,170,218,273,274}, {221,172,171,219,274,275}, {222,173,172,220,275,276}, {223,174,173,221,276,277}, {224,175,174,222,277,278}, {225,176,175,223,278,279}, {226,177,176,224,279,280}, {282,227,177,225,280,281}, {283,228,178,177,226,282}, {284,229,179,178,227,283}, {285,230,180,179,228,284}, {286,231,181,180,229,285}, {287,232,182,181,230,286}, {288,233,183,182,231,287}, {289,234,184,183,232,288}, {290,235,185,184,233,289}, {291,292,236,185,234,290}, {292,293,237,186,185,235}, {293,294,238,187,186,236}, {294,295,239,188,187,237}, {295,296,240,189,188,238}, {296,297,241,190,189,239}, {297,298,242,191,190,240}, {298,299,243,192,191,241}, {299,300,244,193,192,242}, {300,301,302,245,193,243}, {244,302,303,246,194,193}, {245,303,304,247,195,194}, {246,304,305,248,196,195}, {247,305,306,249,197,196}, {248,306,307,250,198,197}, {249,307,308,251,199,198}, {250,308,309,252,200,199}, {251,309,310,253,201,200}, {252,310,311,312,254,201}, {201,253,312,313,255,202}, {202,254,313,314,256,203}, {203,255,314,315,257,204}, {204,256,315,316,258,205}, {205,257,316,317,259,206}, {206,258,317,318,260,207}, {207,259,318,319,261,208}, {208,260,319,320,262,209}, {209,261,320,321,322,263}, {210,209,262,322,323,264}, {211,210,263,323,324,265}, {212,211,264,324,325,266}, {213,212,265,325,326,267}, {214,213,266,326,327,268}, {215,214,267,327,328,269}, {216,215,268,328,329,270}, {169,216,269,329,330,217}, {272,217,330,396,331,332}, {273,218,217,271,332,333}, {274,219,218,272,333,334}, {275,220,219,273,334,335}, {276,221,220,274,335,336}, {277,222,221,275,336,337}, {278,223,222,276,337,338}, {279,224,223,277,338,339}, {280,225,224,278,339,340}, {281,226,225,279,340,341}, {343,282,226,280,341,342}, {344,283,227,226,281,343}, {345,284,228,227,282,344}, {346,285,229,228,283,345}, {347,286,230,229,284,346}, {348,287,231,230,285,347}, {349,288,232,231,286,348}, {350,289,233,232,287,349}, {351,290,234,233,288,350}, {352,291,235,234,289,351}, {353,354,292,235,290,352}, {354,355,293,236,235,291}, {355,356,294,237,236,292}, {356,357,295,238,237,293}, {357,358,296,239,238,294}, {358,359,297,240,239,295}, {359,360,298,241,240,296}, {360,361,299,242,241,297}, {361,362,300,243,242,298}, {362,363,301,244,243,299}, {363,364,365,302,244,300}, {301,365,366,303,245,244}, {302,366,367,304,246,245}, {303,367,368,305,247,246}, {304,368,369,306,248,247}, {305,369,370,307,249,248}, {306,370,371,308,250,249}, {307,371,372,309,251,250}, {308,372,373,310,252,251}, {309,373,374,311,253,252}, {310,374,375,376,312,253}, {253,311,376,377,313,254}, {254,312,377,378,314,255}, {255,313,378,379,315,256}, {256,314,379,380,316,257}, {257,315,380,381,317,258}, {258,316,381,382,318,259}, {259,317,382,383,319,260}, {260,318,383,384,320,261}, {261,319,384,385,321,262}, {262,320,385,386,387,322}, {263,262,321,387,388,323}, {264,263,322,388,389,324}, {265,264,323,389,390,325}, {266,265,324,390,391,326}, {267,266,325,391,392,327}, {268,267,326,392,393,328}, {269,268,327,393,394,329}, {270,269,328,394,395,330}, {217,270,329,395,396,271}, {332,271,396,364,364,364}, {333,272,271,331,365,365}, {334,273,272,332,366,366}, {335,274,273,333,367,367}, {336,275,274,334,368,368}, {337,276,275,335,369,369}, {338,277,276,336,370,370}, {339,278,277,337,371,371}, {340,279,278,338,372,372}, {341,280,279,339,373,373}, {342,281,280,340,374,374}, {375,343,281,341,375,375}, {376,344,282,281,342,376}, {377,345,283,282,343,377}, {378,346,284,283,344,378}, {379,347,285,284,345,379}, {380,348,286,285,346,380}, {381,349,287,286,347,381}, {382,350,288,287,348,382}, {383,351,289,288,349,383}, {384,352,290,289,350,384}, {385,353,291,290,351,385}, {386,386,354,291,352,386}, {387,387,355,292,291,353}, {388,388,356,293,292,354}, {389,389,357,294,293,355}, {390,390,358,295,294,356}, {391,391,359,296,295,357}, {392,392,360,297,296,358}, {393,393,361,298,297,359}, {394,394,362,299,298,360}, {395,395,363,300,299,361}, {396,396,364,301,300,362}, {331,331,331,365,301,363}, {364,332,332,366,302,301}, {365,333,333,367,303,302}, {366,334,334,368,304,303}, {367,335,335,369,305,304}, {368,336,336,370,306,305}, {369,337,337,371,307,306}, {370,338,338,372,308,307}, {371,339,339,373,309,308}, {372,340,340,374,310,309}, {373,341,341,375,311,310}, {374,342,342,342,376,311}, {311,375,343,343,377,312}, {312,376,344,344,378,313}, {313,377,345,345,379,314}, {314,378,346,346,380,315}, {315,379,347,347,381,316}, {316,380,348,348,382,317}, {317,381,349,349,383,318}, {318,382,350,350,384,319}, {319,383,351,351,385,320}, {320,384,352,352,386,321}, {321,385,353,353,353,387}, {322,321,386,354,354,388}, {323,322,387,355,355,389}, {324,323,388,356,356,390}, {325,324,389,357,357,391}, {326,325,390,358,358,392}, {327,326,391,359,359,393}, {328,327,392,360,360,394}, {329,328,393,361,361,395}, {330,329,394,362,362,396}, {271,330,395,363,363,331} };

int warping_neighbor( int led, int neighbor ) {
  return warping_neighbors_array[ led ][ neighbor % 6 ];
}

int leds_in_polar_ring( int ring ){
  if( ring == 0 )
    return 1; // center ring, ring 0, only has 1 LED
  else
    return 6 * ring; // the other rings are simply hexagons
}

int polar2led( int ring, int led ) {
  
  int result = 0;
  
  // count LEDs for inner rings
  if( ring > 0 )
    for( int iring = 0; iring < ring; iring++ )
      result += leds_in_polar_ring( iring );
  
  // find LED on this ring
  result += led % leds_in_polar_ring( ring );
  
  return result;
}

int doublepolar2led( int ring, double angle ) { // angle between [0..tau]
  int led = angle * leds_in_polar_ring( ring ) / TAU;
  return polar2led( ring, led );
}

int skewed2led_array[23][23] = { 
  { -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 386, 385, 384, 383, 382, 381, 380, 379, 378, 377, 376, 375}, 
  {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 387, 321, 320, 319, 318, 317, 316, 315, 314, 313, 312, 311, 374}, 
  {-1, -1, -1, -1, -1, -1, -1, -1, -1, 388, 322, 262, 261, 260, 259, 258, 257, 256, 255, 254, 253, 310, 373}, 
  {-1, -1, -1, -1, -1, -1, -1, -1, 389, 323, 263, 209, 208, 207, 206, 205, 204, 203, 202, 201, 252, 309, 372}, 
  {-1, -1, -1, -1, -1, -1, -1, 390, 324, 264, 210, 162, 161, 160, 159, 158, 157, 156, 155, 200, 251, 308, 371}, 
  {-1, -1, -1, -1, -1, -1, 391, 325, 265, 211, 163, 121, 120, 119, 118, 117, 116, 115, 154, 199, 250, 307, 370}, 
  {-1, -1, -1, -1, -1, 392, 326, 266, 212, 164, 122, 86, 85, 84, 83, 82, 81, 114, 153, 198, 249, 306, 369}, 
  {-1, -1, -1, -1, 393, 327, 267, 213, 165, 123, 87, 57, 56, 55, 54, 53, 80, 113, 152, 197, 248, 305, 368}, 
  {-1, -1, -1, 394, 328, 268, 214, 166, 124, 88, 58, 34, 33, 32, 31, 52, 79, 112, 151, 196, 247, 304, 367}, 
  {-1, -1, 395, 329, 269, 215, 167, 125, 89, 59, 35, 17, 16, 15, 30, 51, 78, 111, 150, 195, 246, 303, 366}, 
  {-1, 396, 330, 270, 216, 168, 126, 90, 60, 36, 18, 6, 5, 14, 29, 50, 77, 110, 149, 194, 245, 302, 365}, 
  {331, 271, 217, 169, 127, 91, 61, 37, 19, 7, 1, 0, 4, 13, 28, 49, 76, 109, 148, 193, 244, 301, 364}, 
  {332, 272, 218, 170, 128, 92, 62, 38, 20, 8, 2, 3, 12, 27, 48, 75, 108, 147, 192, 243, 300, 363, -1}, 
  {333, 273, 219, 171, 129, 93, 63, 39, 21, 9, 10, 11, 26, 47, 74, 107, 146, 191, 242, 299, 362, -1, -1}, 
  {334, 274, 220, 172, 130, 94, 64, 40, 22, 23, 24, 25, 46, 73, 106, 145, 190, 241, 298, 361, -1, -1, -1}, 
  {335, 275, 221, 173, 131, 95, 65, 41, 42, 43, 44, 45, 72, 105, 144, 189, 240, 297, 360, -1, -1, -1, -1}, 
  {336, 276, 222, 174, 132, 96, 66, 67, 68, 69, 70, 71, 104, 143, 188, 239, 296, 359, -1, -1, -1, -1, -1}, 
  {337, 277, 223, 175, 133, 97, 98, 99, 100, 101, 102, 103, 142, 187, 238, 295, 358, -1, -1, -1, -1, -1, -1}, 
  {338, 278, 224, 176, 134, 135, 136, 137, 138, 139, 140, 141, 186, 237, 294, 357, -1, -1, -1, -1, -1, -1, -1}, 
  {339, 279, 225, 177, 178, 179, 180, 181, 182, 183, 184, 185, 236, 293, 356, -1, -1, -1, -1, -1, -1, -1, -1}, 
  {340, 280, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 292, 355, -1, -1, -1, -1, -1, -1, -1, -1, -1}, 
  {341, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 354, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, 
  {342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}
};

int skewed2led( int x, int y ) {
  if( ( x < -11 ) || ( y < -11 ) || ( x > 11 ) || ( y > 11 ) )
    return -1;
  else
    return skewed2led_array[ 11 + x ][ 11 + y ];
}

int led2skewed_array[397][2] = { { 0, 0 }, { 0, -1 }, { 1, -1 }, { 1, 0 }, { 0, 1 }, { -1, 1 }, { -1, 0 }, { 0, -2 }, { 1, -2 }, { 2, -2 }, { 2, -1 }, { 2, 0 }, { 1, 1 }, { 0, 2 }, { -1, 2 }, { -2, 2 }, { -2, 1 }, { -2, 0 }, { -1, -1 }, { 0, -3 }, { 1, -3 }, { 2, -3 }, { 3, -3 }, { 3, -2 }, { 3, -1 }, { 3, 0 }, { 2, 1 }, { 1, 2 }, { 0, 3 }, { -1, 3 }, { -2, 3 }, { -3, 3 }, { -3, 2 }, { -3, 1 }, { -3, 0 }, { -2, -1 }, { -1, -2 }, { 0, -4 }, { 1, -4 }, { 2, -4 }, { 3, -4 }, { 4, -4 }, { 4, -3 }, { 4, -2 }, { 4, -1 }, { 4, 0 }, { 3, 1 }, { 2, 2 }, { 1, 3 }, { 0, 4 }, { -1, 4 }, { -2, 4 }, { -3, 4 }, { -4, 4 }, { -4, 3 }, { -4, 2 }, { -4, 1 }, { -4, 0 }, { -3, -1 }, { -2, -2 }, { -1, -3 }, { 0, -5 }, { 1, -5 }, { 2, -5 }, { 3, -5 }, { 4, -5 }, { 5, -5 }, { 5, -4 }, { 5, -3 }, { 5, -2 }, { 5, -1 }, { 5, 0 }, { 4, 1 }, { 3, 2 }, { 2, 3 }, { 1, 4 }, { 0, 5 }, { -1, 5 }, { -2, 5 }, { -3, 5 }, { -4, 5 }, { -5, 5 }, { -5, 4 }, { -5, 3 }, { -5, 2 }, { -5, 1 }, { -5, 0 }, { -4, -1 }, { -3, -2 }, { -2, -3 }, { -1, -4 }, { 0, -6 }, { 1, -6 }, { 2, -6 }, { 3, -6 }, { 4, -6 }, { 5, -6 }, { 6, -6 }, { 6, -5 }, { 6, -4 }, { 6, -3 }, { 6, -2 }, { 6, -1 }, { 6, 0 }, { 5, 1 }, { 4, 2 }, { 3, 3 }, { 2, 4 }, { 1, 5 }, { 0, 6 }, { -1, 6 }, { -2, 6 }, { -3, 6 }, { -4, 6 }, { -5, 6 }, { -6, 6 }, { -6, 5 }, { -6, 4 }, { -6, 3 }, { -6, 2 }, { -6, 1 }, { -6, 0 }, { -5, -1 }, { -4, -2 }, { -3, -3 }, { -2, -4 }, { -1, -5 }, { 0, -7 }, { 1, -7 }, { 2, -7 }, { 3, -7 }, { 4, -7 }, { 5, -7 }, { 6, -7 }, { 7, -7 }, { 7, -6 }, { 7, -5 }, { 7, -4 }, { 7, -3 }, { 7, -2 }, { 7, -1 }, { 7, 0 }, { 6, 1 }, { 5, 2 }, { 4, 3 }, { 3, 4 }, { 2, 5 }, { 1, 6 }, { 0, 7 }, { -1, 7 }, { -2, 7 }, { -3, 7 }, { -4, 7 }, { -5, 7 }, { -6, 7 }, { -7, 7 }, { -7, 6 }, { -7, 5 }, { -7, 4 }, { -7, 3 }, { -7, 2 }, { -7, 1 }, { -7, 0 }, { -6, -1 }, { -5, -2 }, { -4, -3 }, { -3, -4 }, { -2, -5 }, { -1, -6 }, { 0, -8 }, { 1, -8 }, { 2, -8 }, { 3, -8 }, { 4, -8 }, { 5, -8 }, { 6, -8 }, { 7, -8 }, { 8, -8 }, { 8, -7 }, { 8, -6 }, { 8, -5 }, { 8, -4 }, { 8, -3 }, { 8, -2 }, { 8, -1 }, { 8, 0 }, { 7, 1 }, { 6, 2 }, { 5, 3 }, { 4, 4 }, { 3, 5 }, { 2, 6 }, { 1, 7 }, { 0, 8 }, { -1, 8 }, { -2, 8 }, { -3, 8 }, { -4, 8 }, { -5, 8 }, { -6, 8 }, { -7, 8 }, { -8, 8 }, { -8, 7 }, { -8, 6 }, { -8, 5 }, { -8, 4 }, { -8, 3 }, { -8, 2 }, { -8, 1 }, { -8, 0 }, { -7, -1 }, { -6, -2 }, { -5, -3 }, { -4, -4 }, { -3, -5 }, { -2, -6 }, { -1, -7 }, { 0, -9 }, { 1, -9 }, { 2, -9 }, { 3, -9 }, { 4, -9 }, { 5, -9 }, { 6, -9 }, { 7, -9 }, { 8, -9 }, { 9, -9 }, { 9, -8 }, { 9, -7 }, { 9, -6 }, { 9, -5 }, { 9, -4 }, { 9, -3 }, { 9, -2 }, { 9, -1 }, { 9, 0 }, { 8, 1 }, { 7, 2 }, { 6, 3 }, { 5, 4 }, { 4, 5 }, { 3, 6 }, { 2, 7 }, { 1, 8 }, { 0, 9 }, { -1, 9 }, { -2, 9 }, { -3, 9 }, { -4, 9 }, { -5, 9 }, { -6, 9 }, { -7, 9 }, { -8, 9 }, { -9, 9 }, { -9, 8 }, { -9, 7 }, { -9, 6 }, { -9, 5 }, { -9, 4 }, { -9, 3 }, { -9, 2 }, { -9, 1 }, { -9, 0 }, { -8, -1 }, { -7, -2 }, { -6, -3 }, { -5, -4 }, { -4, -5 }, { -3, -6 }, { -2, -7 }, { -1, -8 }, { 0, -10 }, { 1, -10 }, { 2, -10 }, { 3, -10 }, { 4, -10 }, { 5, -10 }, { 6, -10 }, { 7, -10 }, { 8, -10 }, { 9, -10 }, { 10, -10 }, { 10, -9 }, { 10, -8 }, { 10, -7 }, { 10, -6 }, { 10, -5 }, { 10, -4 }, { 10, -3 }, { 10, -2 }, { 10, -1 }, { 10, 0 }, { 9, 1 }, { 8, 2 }, { 7, 3 }, { 6, 4 }, { 5, 5 }, { 4, 6 }, { 3, 7 }, { 2, 8 }, { 1, 9 }, { 0, 10 }, { -1, 10 }, { -2, 10 }, { -3, 10 }, { -4, 10 }, { -5, 10 }, { -6, 10 }, { -7, 10 }, { -8, 10 }, { -9, 10 }, { -10, 10 }, { -10, 9 }, { -10, 8 }, { -10, 7 }, { -10, 6 }, { -10, 5 }, { -10, 4 }, { -10, 3 }, { -10, 2 }, { -10, 1 }, { -10, 0 }, { -9, -1 }, { -8, -2 }, { -7, -3 }, { -6, -4 }, { -5, -5 }, { -4, -6 }, { -3, -7 }, { -2, -8 }, { -1, -9 }, { 0, -11 }, { 1, -11 }, { 2, -11 }, { 3, -11 }, { 4, -11 }, { 5, -11 }, { 6, -11 }, { 7, -11 }, { 8, -11 }, { 9, -11 }, { 10, -11 }, { 11, -11 }, { 11, -10 }, { 11, -9 }, { 11, -8 }, { 11, -7 }, { 11, -6 }, { 11, -5 }, { 11, -4 }, { 11, -3 }, { 11, -2 }, { 11, -1 }, { 11, 0 }, { 10, 1 }, { 9, 2 }, { 8, 3 }, { 7, 4 }, { 6, 5 }, { 5, 6 }, { 4, 7 }, { 3, 8 }, { 2, 9 }, { 1, 10 }, { 0, 11 }, { -1, 11 }, { -2, 11 }, { -3, 11 }, { -4, 11 }, { -5, 11 }, { -6, 11 }, { -7, 11 }, { -8, 11 }, { -9, 11 }, { -10, 11 }, { -11, 11 }, { -11, 10 }, { -11, 9 }, { -11, 8 }, { -11, 7 }, { -11, 6 }, { -11, 5 }, { -11, 4 }, { -11, 3 }, { -11, 2 }, { -11, 1 }, { -11, 0 }, { -10, -1 }, { -9, -2 }, { -8, -3 }, { -7, -4 }, { -6, -5 }, { -5, -6 }, { -4, -7 }, { -3, -8 }, { -2, -9 }, { -1, -10 } };

int led2skewedx( int led ) {
  return led2skewed[ led ][ 0 ];
}

int led2skewedy( int led ) {
  return led2skewed[ led ][ 1 ];
}
